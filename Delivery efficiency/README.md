# delivery_efficiency

SQL-представление для анализа эффективности работы курьеров.

## Назначение

Представление `delivery_efficiency` предназначено для оценки производительности курьеров на основе данных о доставленных заказах.
Используется как источник данных для аналитики и визуализации в Power BI.

## Логика представления

В представлении агрегируются данные по каждому курьеру с учётом завершённых доставок.

Основные метрики:

* количество доставленных заказов;
* количество отменных заказов;
* отношение доставленных к общему количеству заказов. 

Агрегация выполняется на уровне SQL, что:

* упрощает повторное использование логики;
* обеспечивает единый источник для аналитики.

## Используемые данные

Представление строится на основе таблиц:

* `orders`
* `delivery`

Отношения не используются напрямую, а задействуются внутри представления. Это означает фактическое сокрытие указанных таблиц и, соответственно, невозможность редактирования/удаления данных без необходимого доступа.

Фильтры: только заказы со статусом завершённой доставки.

**Пример использования:**

Во вложенном файле.

## Визуализация в Power BI

Представление используется как источник данных в Power BI, с дополнительной трансформацей типа данных в Excel.

Построенные визуализации:

* выявление самых и наименее эффективных курьеров через соотношение успешных и отмененных заказов;
* вовлеченность сотрудников через сравнение доли успешных доставок;
* вовлеченность сотрудников в работу через сравнение доли от всех заказов.

## Преимущества подхода

* бизнес-логика вынесена в SQL;
* Power BI работает с готовыми агрегатами;
* упрощается поддержка и масштабирование аналитики;
* минимизируется дублирование расчётов.

## Примечание

Представление может быть расширено дополнительными метриками (SLA, медианное время доставки, процент опозданий).
